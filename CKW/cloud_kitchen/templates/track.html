{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Track Order | CKW Cloud Kitchen</title>
  <link rel="stylesheet" href="{% static 'login.css' %}" />
  <link rel="stylesheet" href="{% static 'track.css' %}" />
  <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
  <script src="https://kit.fontawesome.com/95a02bd20d.js"></script>
</head>
<body>
  <video autoplay muted loop class="background-video">
    <source src="{% static 'videos/BG2.mp4' %}" type="video/mp4">
  </video>
  <nav class="nav">
    <ul class="nav-content">
      <li class="nav-list">
        <a href="{% url 'home' %}" class="link-item">
          <i class='bx bxs-home link-icon'></i>
          <span class="link-text">Home</span>
        </a>
      </li>
      <li class="nav-list">
         <a href="{% url 'menu' %}" class="link-item">
           <i class='bx bxs-food-menu link-icon'></i>
           <span class="link-text">Menu</span>
         </a>
      </li>
      <li class="nav-list">
        <a href="{% url 'offers' %}" class="link-item">
          <i class='bx bxs-offer link-icon'></i>
          <span class="link-text">Offers</span>
        </a>
      </li>
      <li class="nav-list">
        <a href="{% url 'cart' %}" class="link-item">
          <i class='bx bxs-shopping-bag link-icon'></i>
          <span class="link-text">Cart</span>
        </a>
      </li>
      <li class="nav-list">
        <a href="{% url 'track' %}" class="link-item active">
          <i class='bx bxs-truck link-icon'></i>
          <span class="link-text">Track</span>
        </a>
      </li>
      <li class="nav-list">
        <a href="{% url 'about' %}" class="link-item">
          <i class='bx bxs-info-circle link-icon'></i>
          <span class="link-text">About</span>
        </a>
      </li>
      <li class="nav-list">
        <a href="{% url 'contact' %}" class="link-item">
          <i class='bx bxs-phone link-icon'></i>
          <span class="link-text">Contact</span>
        </a>
      </li>
      <li class="nav-list">
        <a href="{% url 'reviews' %}" class="link-item">
          <i class='bx bxs-star link-icon'></i>
          <span class="link-text">Reviews</span>
        </a>
      </li>
      <li class="nav-list">
        <a href="{% url 'profile' %}" class="link-item">
          <i class='bx bxs-user link-icon'></i>
          <span class="link-text">Profile</span>
        </a>
      </li>
    </ul>
  </nav>
  <div class="logout-container">
    <a href="{% url 'login' %}" class="logout-btn">Logout</a>
  </div>

  <!-- Page Content -->
  <div class="track-content">
    <h1>Track Your Orders</h1>

    {% if orders %}
      {% for order in orders %}
        <div class="order-card">
          <div class="order-header">
            <h3>Order #{{ order.order_number }}</h3>
            <p class="order-date">{{ order.created_at|date:"M d, Y H:i" }}</p>
          </div>

          <div class="status-icons">
            {% if order.status == 'pending' %}
              <div class="status-icon pending active">
                <i class='bx bx-time-five'></i>
                <span>Pending</span>
              </div>
              <div class="status-icon confirmed">
                <i class='bx bx-check-circle'></i>
                <span>Confirmed</span>
              </div>
              <div class="status-icon preparing">
                <i class='bx bx-cooking'></i>
                <span>Preparing</span>
              </div>
              <div class="status-icon ready">
                <i class='bx bx-package'></i>
                <span>Ready</span>
              </div>
              <div class="status-icon delivered">
                <i class='bx bx-check-double'></i>
                <span>Delivered</span>
              </div>
              <div class="status-icon cancelled">
                <i class='bx bx-x-circle'></i>
                <span>Cancelled</span>
              </div>
            {% elif order.status == 'confirmed' %}
              <div class="status-icon pending active">
                <i class='bx bx-time-five'></i>
                <span>Pending</span>
              </div>
              <div class="status-icon confirmed active">
                <i class='bx bx-check-circle'></i>
                <span>Confirmed</span>
              </div>
              <div class="status-icon preparing">
                <i class='bx bx-cooking'></i>
                <span>Preparing</span>
              </div>
              <div class="status-icon ready">
                <i class='bx bx-package'></i>
                <span>Ready</span>
              </div>
              <div class="status-icon delivered">
                <i class='bx bx-check-double'></i>
                <span>Delivered</span>
              </div>
              <div class="status-icon cancelled">
                <i class='bx bx-x-circle'></i>
                <span>Cancelled</span>
              </div>
            {% elif order.status == 'preparing' %}
              <div class="status-icon pending active">
                <i class='bx bx-time-five'></i>
                <span>Pending</span>
              </div>
              <div class="status-icon confirmed active">
                <i class='bx bx-check-circle'></i>
                <span>Confirmed</span>
              </div>
              <div class="status-icon preparing active">
                <i class='bx bx-cooking'></i>
                <span>Preparing</span>
              </div>
              <div class="status-icon ready">
                <i class='bx bx-package'></i>
                <span>Ready</span>
              </div>
              <div class="status-icon delivered">
                <i class='bx bx-check-double'></i>
                <span>Delivered</span>
              </div>
              <div class="status-icon cancelled">
                <i class='bx bx-x-circle'></i>
                <span>Cancelled</span>
              </div>
            {% elif order.status == 'ready' %}
              <div class="status-icon pending active">
                <i class='bx bx-time-five'></i>
                <span>Pending</span>
              </div>
              <div class="status-icon confirmed active">
                <i class='bx bx-check-circle'></i>
                <span>Confirmed</span>
              </div>
              <div class="status-icon preparing active">
                <i class='bx bx-cooking'></i>
                <span>Preparing</span>
              </div>
              <div class="status-icon ready active">
                <i class='bx bx-package'></i>
                <span>Ready</span>
              </div>
              <div class="status-icon delivered">
                <i class='bx bx-check-double'></i>
                <span>Delivered</span>
              </div>
              <div class="status-icon cancelled">
                <i class='bx bx-x-circle'></i>
                <span>Cancelled</span>
              </div>
            {% elif order.status == 'delivered' %}
              <div class="status-icon pending active">
                <i class='bx bx-time-five'></i>
                <span>Pending</span>
              </div>
              <div class="status-icon confirmed active">
                <i class='bx bx-check-circle'></i>
                <span>Confirmed</span>
              </div>
              <div class="status-icon preparing active">
                <i class='bx bx-cooking'></i>
                <span>Preparing</span>
              </div>
              <div class="status-icon ready active">
                <i class='bx bx-package'></i>
                <span>Ready</span>
              </div>
              <div class="status-icon delivered active">
                <i class='bx bx-check-double'></i>
                <span>Delivered</span>
              </div>
              <div class="status-icon cancelled">
                <i class='bx bx-x-circle'></i>
                <span>Cancelled</span>
              </div>
            {% elif order.status == 'cancelled' %}
              <div class="status-icon cancelled active">
                <i class='bx bx-x-circle'></i>
                <span>Cancelled</span>
              </div>
            {% endif %}
          </div>

          <div class="order-details">
            <p><strong>Total:</strong> â‚¹{{ order.total }}</p>
            <p><strong>Status:</strong> {{ order.get_status_display }}</p>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>You haven't placed any orders yet.</p>
    {% endif %}
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const linkItems = document.querySelectorAll('.link-item');

      linkItems.forEach(item => {
        item.addEventListener('click', function(e) {
          // Remove active class from all items
          linkItems.forEach(link => link.classList.remove('active'));
          // Add active class to clicked item
          this.classList.add('active');
        });
      });
    });
  </script>
</body>
</html>