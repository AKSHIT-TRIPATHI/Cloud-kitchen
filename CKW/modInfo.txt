# Cloud Kitchen Database Models Documentation

## Project Overview
This is a Django-based Cloud Kitchen web application that provides a complete food ordering system with user authentication, menu management, cart functionality, order processing, customer reviews, and admin management.

## Database Models

### 1. User Model
**Purpose:** Manages user accounts and authentication for the application.

**Fields:**
- `username` (CharField, unique): User's login username
- `email` (EmailField, unique, optional): User's email address
- `password` (CharField): Hashed password for security
- `phone_number` (CharField, optional): User's contact number
- `is_staff` (BooleanField): Determines admin privileges
- `profile_pic` (ImageField, optional): User's profile picture

**Methods:**
- `set_password()`: Hashes raw password
- `check_password()`: Verifies password match
- `__str__()`: Returns username as string representation

**Usage:** User registration, login, profile management, admin access control

---

### 2. Category Model
**Purpose:** Organizes food items into logical menu categories.

**Fields:**
- `name` (CharField, choices, unique): Internal category identifier
- `display_name` (CharField): Human-readable category name
- `emoji` (CharField, optional): Category emoji/icon
- `slug` (SlugField, unique): URL-friendly identifier
- `is_active` (BooleanField): Category availability status

**Category Choices:**
- 'starters' - Starters & Snacks
- 'main_course' - Main Course
- 'biryani' - Biryani & Rice
- 'burgers' - Burgers & Fast Food
- 'drinks' - Drinks & Beverages
- 'desserts' - Desserts & Ice Creams
- 'combos' - Combos & Meal Boxes

**Usage:** Menu structure, food item categorization, navigation

---

### 3. FoodItem Model
**Purpose:** Represents individual menu items/products available for order.

**Fields:**
- `category` (ForeignKey to Category): Item's category
- `name` (CharField): Item name
- `description` (TextField): Detailed item description
- `price` (DecimalField): Item price in rupees
- `icon_class` (CharField): FontAwesome icon class for UI
- `is_available` (BooleanField): Item availability status
- `created_at` (DateTimeField): Creation timestamp
- `updated_at` (DateTimeField): Last modification timestamp

**Usage:** Menu display, pricing, inventory management, cart items

---

### 4. Cart Model
**Purpose:** Shopping cart container for users and anonymous sessions.

**Fields:**
- `user` (OneToOneField to User, optional): Associated user
- `session_key` (CharField, optional): For anonymous users
- `created_at` (DateTimeField): Cart creation time
- `updated_at` (DateTimeField): Last cart modification

**Methods:**
- `get_total_items()`: Count of all items in cart
- `get_subtotal()`: Sum of item prices before fees/tax
- `get_delivery_fee()`: Fixed delivery charge (₹40)
- `get_tax()`: GST calculation (18%)
- `get_total()`: Final total including all charges

**Usage:** Temporary item storage before checkout, session management

---

### 5. CartItem Model
**Purpose:** Individual items within a shopping cart with quantities.

**Fields:**
- `cart` (ForeignKey to Cart): Parent cart
- `food_item` (ForeignKey to FoodItem): The menu item
- `quantity` (PositiveIntegerField): Item count
- `is_offer_item` (BooleanField): Whether added via offer
- `offer_price` (DecimalField, optional): Discounted price

**Methods:**
- `get_total_price()`: Price × quantity (uses offer price if applicable)

**Usage:** Cart item management, quantity tracking, offer pricing

---

### 6. Offer Model
**Purpose:** Manages promotional discounts on food items.

**Fields:**
- `food_item` (ForeignKey to FoodItem): Item with discount
- `discount_percentage` (DecimalField): Discount amount (e.g., 40.00)
- `is_active` (BooleanField): Offer availability
- `created_at` (DateTimeField): Offer creation time
- `updated_at` (DateTimeField): Last offer modification

**Methods:**
- `get_discounted_price()`: Calculates final price after discount

**Usage:** Promotional pricing, limited-time offers, marketing

---

### 7. Order Model
**Purpose:** Completed customer orders and transaction records.

**Fields:**
- `user` (ForeignKey to User): Customer who placed order
- `order_number` (CharField, unique): Auto-generated order ID
- `items` (JSONField): Cart items snapshot as JSON
- `subtotal` (DecimalField): Items total before fees
- `delivery_fee` (DecimalField): Delivery charges
- `tax` (DecimalField): GST amount
- `total` (DecimalField): Final order total
- `status` (CharField, choices): Order processing status
- `delivery_address` (TextField, optional): Delivery location
- `phone_number` (CharField, optional): Contact number
- `special_instructions` (TextField, optional): Delivery notes

**Status Choices:**
- 'pending' - Order received
- 'confirmed' - Order confirmed
- 'preparing' - Food being prepared
- 'ready' - Ready for pickup
- 'delivered' - Successfully delivered
- 'cancelled' - Order cancelled

**Usage:** Order history, status tracking, delivery management

---

### 8. ContactMessage Model
**Purpose:** Customer inquiries, support requests, and feedback messages.

**Fields:**
- `user` (ForeignKey to User, optional): Associated user if logged in
- `name` (CharField): Sender's name
- `email` (EmailField): Sender's email
- `subject` (CharField, optional): Message subject
- `message` (TextField): Full message content
- `is_read` (BooleanField): Admin read status
- `created_at` (DateTimeField): Message timestamp

**Usage:** Customer support, inquiries, feedback collection

---

### 9. Review Model
**Purpose:** Customer feedback and ratings for the service.

**Fields:**
- `user` (ForeignKey to User): Reviewer
- `message` (TextField): Review content
- `stars` (PositiveIntegerField, 1-5): Star rating
- `created_at` (DateTimeField): Review timestamp

**Usage:** Customer testimonials, service quality tracking, user feedback

---

## Model Relationships

```
User (1) ──── (1) Cart
User (1) ──── (Many) Order
User (1) ──── (Many) ContactMessage
User (1) ──── (Many) Review

Category (1) ──── (Many) FoodItem

FoodItem (1) ──── (Many) CartItem
FoodItem (1) ──── (Many) Offer

Cart (1) ──── (Many) CartItem
```

## Key Features

### Authentication & Users
- Custom user model with password hashing
- Staff/admin user management
- Profile pictures support
- Session-based cart for anonymous users

### Menu Management
- Hierarchical category system
- Dynamic menu items with pricing
- Availability status management
- FontAwesome icon integration

### Cart & Ordering
- Session and user-based cart support
- Real-time price calculations
- Tax and delivery fee handling
- Order status workflow

### Promotions
- Percentage-based discounts
- Offer activation/deactivation
- Price calculation methods

### Customer Service
- Contact form with user association
- Message management system
- Review and rating system

### Admin Features
- Django admin integration
- Order status management
- Customer message handling
- Review monitoring

## Technology Stack
- **Backend:** Django 5.2.4
- **Database:** SQLite3 (development), PostgreSQL (production)
- **Frontend:** HTML5, CSS3, JavaScript
- **Styling:** Custom CSS with glassmorphism effects
- **Icons:** FontAwesome, Boxicons

## Getting Started
1. Install Django and dependencies
2. Run migrations: `python manage.py migrate`
3. Create superuser: `python manage.py createsuperuser`
4. Run development server: `python manage.py runserver`
5. Access admin at `/admin/` and app at `/`

This documentation provides a complete overview of the database structure and functionality for contributors and maintainers of the Cloud Kitchen project.